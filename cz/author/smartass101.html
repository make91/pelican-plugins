<!DOCTYPE html>
<html lang="cz">
<head>
        <meta charset="utf-8" />
        <title>smartass101ovy Pelican doplňky - smartass101</title>
        <link rel="stylesheet" href="http://smartass101.github.io/pelican-plugins/cz/theme/css/main.css" />
        <link href="http://smartass101.github.io/pelican-plugins/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="smartass101ovy Pelican doplňky Atom Feed" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="http://smartass101.github.io/pelican-plugins/cz/">smartass101ovy Pelican doplňky </a></h1>
                <nav><ul>
		    <li><a href="http://smartass101.github.io/pelican-plugins">English</a></li>
		    <!-- separator -->
		    <li style="background-color: white; padding: 5px;">&nbsp</li>
                    <li><a href="http://smartass101.github.io/pelican-plugins/cz/category/i18n_subsites.html">i18n_subsites</a></li>
                </ul>
		</nav>		
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="http://smartass101.github.io/pelican-plugins/cz/implementing-lang-buttons.html">Implementing language buttons</a></h1>
<footer class="post-info">
        <abbr class="published" title="2014-02-03T00:00:00">
Publikováno: Mon 03 February 2014
        </abbr>

        <address class="vcard author">
Od <a class="url fn" href="http://smartass101.github.io/pelican-plugins/cz/author/smartass101.html">smartass101</a>
        </address>
        <p>V <a href="http://smartass101.github.io/pelican-plugins/cz/category/i18n_subsites.html">i18n_subsites</a>. </p>

</footer><!-- /.post-info --><p>Each article with translations has translations links, but that's the only way to switch between language subsites.</p>
<p>I wanted to make it simple to switch between the language subsites on all pages, so I decided to add language buttons to the top menu bar.</p>
<p>For this purpose I used the <tt class="docutils literal">extra_siteurls</tt> dictionary exported by the <tt class="docutils literal">i18n_subsites</tt> plugin into the template context. This dictionary mapps the language code to the SITEURL of the respective subsite. But I wanted the language button to show the names of the language codes, not just the language codes.</p>
<p>Perhaps I should have added support for putting the names in <tt class="docutils literal">I18N_SUBSITES</tt> and exporting the names in <tt class="docutils literal">extra_siteurls</tt> too? No, I want to keep the <tt class="docutils literal">i18n_subsites</tt> plugin as simple as possible and let people add features onto it. IMHO that is better than making many assumptions about what people may want, because you cannot please everyone, e.g. somebody would rather put there flags <a class="footnote-reference" href="#flags" id="id1">[1]</a>.</p>
<p>So, the (IMHO) simplest way to support this is to make a simple jinja2 filter that translates the language code to the language name via a dictionary. Here is the relevant part of my pelicanconf.py</p>
<div class="highlight"><pre><span class="n">languages_lookup</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s">&#39;en&#39;</span><span class="p">:</span> <span class="s">&#39;English&#39;</span><span class="p">,</span>
             <span class="s">&#39;cz&#39;</span><span class="p">:</span> <span class="s">&#39;Čeština&#39;</span><span class="p">,</span>
             <span class="p">}</span>

<span class="k">def</span> <span class="nf">loopkup_lang_name</span><span class="p">(</span><span class="n">lang_code</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">languages_lookup</span><span class="p">[</span><span class="n">lang_code</span><span class="p">]</span>

<span class="n">JINJA_FILTERS</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s">&#39;lookup_lang_name&#39;</span><span class="p">:</span> <span class="n">lookup_lang_name</span><span class="p">,</span>
             <span class="p">}</span>
</pre></div>
<p>Now it's just a matter of using the filter in the <tt class="docutils literal">base.html</tt> template at the beginning of the navbar</p>
<div class="highlight"><pre><span class="x">&lt;!-- SNIP --&gt;</span>
<span class="x">&lt;nav&gt;&lt;ul&gt;</span>
<span class="cp">{%</span> <span class="k">if</span> <span class="nv">extra_siteurls</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">lang</span><span class="o">,</span> <span class="nv">url</span> <span class="k">in</span> <span class="nv">extra_siteurls.items</span><span class="o">()</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">&lt;li&gt;&lt;a href=&quot;</span><span class="cp">{{</span> <span class="nv">url</span> <span class="cp">}}</span><span class="x">&quot;&gt;</span><span class="cp">{{</span> <span class="nv">lang</span> <span class="o">|</span> <span class="nf">lookup_lang_name</span> <span class="cp">}}</span><span class="x">&lt;/a&gt;&lt;/li&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">&lt;!-- separator --&gt;</span>
<span class="x">&lt;li style=&quot;background-color: white; padding: 5px;&quot;&gt;&amp;nbsp&lt;/li&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">title</span><span class="o">,</span> <span class="nv">link</span> <span class="k">in</span> <span class="nv">MENUITEMS</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">&lt;!-- SNIP --&gt;</span>
</pre></div>
<p>You can see the result for yourself at the top of the page.</p>
<table class="docutils footnote" frame="void" id="flags" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Although it may look nice, <a class="reference external" href="http://www.w3.org/TR/i18n-html-tech-lang/#ri20040808.173208643">w3 discourages it</a>.</td></tr>
</tbody>
</table>
                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                <h1>Další články</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="http://smartass101.github.io/pelican-plugins/cz/translated-article.html" rel="bookmark"
                           title="Permalink to Přeložený příspěvek">Přeložený příspěvek</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-02-02T00:00:00">
Publikováno: Sun 02 February 2014
        </abbr>

        <address class="vcard author">
Od <a class="url fn" href="http://smartass101.github.io/pelican-plugins/cz/author/smartass101.html">smartass101</a>
        </address>
        <p>V <a href="http://smartass101.github.io/pelican-plugins/cz/category/i18n_subsites.html">i18n_subsites</a>. </p>
<p>štítky: <a href="http://smartass101.github.io/pelican-plugins/cz/tag/priklad.html">příklad</a></p>Překlady:
        <a href="http://smartass101.github.io/pelican-plugins/cz/../translated-article.html">en</a>

</footer><!-- /.post-info -->                <p>Tento příspěvek má překlad, klikni na odkaz na překlad. Všimni si, že štítek je také přeložen.</p>

                <a class="readmore" href="http://smartass101.github.io/pelican-plugins/cz/translated-article.html">číst více</a>
                </div><!-- /.entry-content -->
            </article></li>
            </ol><!-- /#posts-list -->
<p class="paginator">
Stránka 1 / 1
</p>
            </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                    <h2>odkazy</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                    <h2>sociální sítě</h2>
                        <ul>
                            <li><a href="http://smartass101.github.io/pelican-plugins/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://github.com/smartass101/">github</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
S hrdostí poháněn enginem <a href="http://getpelican.com/">Pelican</a>, který využívá <a href="http://python.org">Python</a>.</br>
Zdrojové kódy pro tyto stránky lze nalézt v <a href="https://github.com/smartass101/pelican-plugins/tree/gh-pages_source">gh-pages_source větvi</a> tohoto <a href="https://github.com/smartass101/pelican-plugins">repozitáře doplňků<a/>.                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->

</body>
</html>